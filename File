<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Click anywhere to hear</title>

  <!-- Open Graph used for Discord preview -->
  <meta property="og:title" content="You have to see this!" />
  <meta property="og:description" content="Trust me, click it â€” you'll laugh." />
  <meta property="og:image" content="https://budddwyer3.github.io/Barrydingle/preview.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://budddwyer3.github.io/Barrydingle/" />

  <style>
    html,body{height:100%;margin:0;background:#000;overflow:hidden}
    video{position:fixed;inset:0;width:100vw;height:100vh;object-fit:cover;}
    /* invisible hint for accessibility (not shown visually) */
    #hint { position: absolute; left: -9999px; top: -9999px; }
  </style>
</head>
<body>
  <!-- Muted autoplay for visuals; will be unmuted on first gesture -->
  <video id="vid" playsinline preload="auto" muted loop>
    <source src="doll.mp4" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>

  <div id="hint" aria-hidden="false">Click anywhere to enable sound</div>

<script>
(function(){
  const video = document.getElementById('vid');

  // Attempt muted autoplay for visuals (may be blocked rarely)
  video.play().catch(()=>{});

  // Single first-gesture handler: unmute, play with sound, request fullscreen
  async function onFirstGesture(e){
    window.removeEventListener('click', onFirstGesture, true);
    window.removeEventListener('touchstart', onFirstGesture, true);
    window.removeEventListener('keydown', onFirstGesture, true);

    try { video.muted = false; video.volume = 1.0; } catch(e){}

    try {
      await video.play();
    } catch(err) {
      // fallback: try muted play then unmute
      try { video.muted = true; await video.play(); } catch(e2){}
    }

    // fullscreen (allowed after user gesture)
    try {
      const el = document.documentElement;
      if (el.requestFullscreen) await el.requestFullscreen();
      else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
    } catch(fsErr){}

    // blur any active element to avoid accidental controls
    try { document.activeElement && document.activeElement.blur(); } catch(e){}
  }

  // capture the first gesture
  window.addEventListener('click', onFirstGesture, true);
  window.addEventListener('touchstart', onFirstGesture, true);
  window.addEventListener('keydown', onFirstGesture, true);
})();
</script>
</body>
</html>
